{
  "_guid_": "S-1026.10",
  "_extends_": "SubmitEvent_v2Ext__PositiveResponse_Base",

  "title": "Submit Event Creation is invoked on v2_external#/case-controller/createEventUsingPOST and multiple organisationProfile with newCase set to Yes or No",

  "prerequisites" : [ {
    "Token_Creation": "S-1026_GetUpdateTokenCaseworker"
  }
  ],

  "specs": [
    "an active profile in CCD",
    "contains a case Id that has just been created as in F-1026_CreateCasePreRequisiteCaseworker",
    "contains an event token for the case just created above",
    "contains some OrganisationPolicy fields with all correct values",
    "is of caseType where case data has Organisation.OrganisationID and multiple organisationProfile with newCase set to Yes or No",
    "contains correctly configured OrganisationPolicy field in F-1026_CreateCasePreRequisiteCaseworker",
    "specifying the case to be updated, as created in F-1026_CreateCasePreRequisiteCaseworker"
   ],

  "users": {
    "invokingUser": {
      "_extends_": "BeftaMasterCaseworker"
    }
  },

  "request": {
    "pathVariables": {
      "cid": "${[scenarioContext][childContexts][F-1026_CreateCasePreRequisiteCaseworker][testData][actualResponse][body][id]}"
    },
    "body": {
      "data": {
        "OrganisationPolicyField": {
          "newCase": "Yes",
          "Organisation": {
            "OrganisationID": "orgID1",
            "OrganisationName": "orgName1"
          }
        },
        "OrganisationPolicyField3" : {
          "newCase": "Yes",
          "Organisation": {
            "OrganisationID": "orgID3",
            "OrganisationName": "orgName3"
          }
        },
        "OrganisationPolicyField5" : {
          "newCase" : "no",
          "Organisation" : {
            "OrganisationID" : "orgID2a",
            "OrganisationName" : "orgName2a"
          }
        },
        "OrganisationPolicyField4" : {
          "Organisation" : {
            "OrganisationID" : "orgID2",
            "OrganisationName" : "orgName2"
          }
        }
      },
      "event": {
        "id": "updateCase",
        "summary": "",
        "description": ""
      },
      "event_token" : "${[scenarioContext][childContexts][Token_Creation][testData][actualResponse][body][token]}"
    }
  },

  "expectedResponse": {
    "body" : {
      "id" : "[[ANYTHING_PRESENT]]",

      "jurisdiction" : "BEFTA_MASTER",
      "case_type" : "FT_NewCaseSupplementry",

      "state" : "CaseUpdated",

      "data" : {
        "OrganisationPolicyField" : {
          "Organisation" : {
            "OrganisationID" : "orgID1",
            "OrganisationName" : "orgName1"
          }
        },
        "OrganisationPolicyField3" : {
          "Organisation" : {
            "OrganisationID" : "orgID3",
            "OrganisationName" : "orgName3"
          }
        },
        "OrganisationPolicyField5" : {
          "Organisation" : {
            "OrganisationID" : "orgID2a",
            "OrganisationName" : "orgName2a"
          }
        },
        "OrganisationPolicyField4" : {
          "Organisation" : {
            "OrganisationID" : "orgID2",
            "OrganisationName" : "orgName2"
          }
        }
      },
      "data_classification": {}
    }
  }
}
