{
  "_guid_": "S-1015.35",
  "_extends_": "StartEvent_v1Ext_Caseworker__PositiveResponse_Base",

  "title": "must successfully update a cases TTL.SystemTTL value where about to start callback responds with TTL missing by using '/caseworkers/{uid}/jurisdictions/{jid}/case-types/{ctid}/cases/{cid}/event-triggers/{etid}/token'",

  "specs": [
    "a caseworker with an active profile in CCD",

    "contains correctly configured event details",
    "has a TTLIncrement of 20 days configured",
    "is configured to trigger an About To Start callback that responds with TTL missing",

    "contains the TTL.SystemTTL for the case, that has been set to 20 days from today"
  ],

  "users": {
    "invokingUser": {
      "_extends_": "BeftaMasterCaseworker"
    }
  },

  "request": {
    "pathVariables": {
      "jid": "BEFTA_MASTER",
      "ctid": "FT_TTL",

      "cid": "${[scenarioContext][childContexts][CreateCase_TTLCaseType_PreRequisiteCaseworker][testData][actualResponse][body][id]}",
      "etid": "updateWithStartTTLMissing"
    }
  },

  "expectedResponse": {
    "body": {
      "case_details": {
        "id": "${[scenarioContext][childContexts][CreateCase_TTLCaseType_PreRequisiteCaseworker][testData][actualResponse][body][id]}",
        "version": 0,
        "jurisdiction": "BEFTA_MASTER",
        "case_type_id": "FT_TTL",

        "case_data": {
          "TTL" : {
            "SystemTTL" : "${[scenarioContext][customValues][dateTwentyDaysFromToday]}",
            "OverrideTTL" : null,
            "Suspended" : "No"
          },
          "TextField" : "[[ANYTHING_PRESENT]]"
        },

        "data_classification": {
          "TextField" : "PUBLIC"
        },
        "security_classifications": {
          "TextField" : "PUBLIC"
        }
      },
      "event_id": "updateWithStartTTLMissing"
    }
  }
}
