{
  "_guid_": "S-1015.51",
  "_extends_": "F-1015_UpdateCase_TTLCaseType_v2Ext_startEventCaseworker__PositiveResponse_Base",

  "title": "must successfully update a cases TTL.SystemTTL value where about to start callback has modified TTL.Suspended value (null -> missing) using v2 '/cases/{cid}/event-triggers/{etid}'",

  "specs": [
    "a caseworker with an active profile in CCD",
    "access to manage TTL properties",

    "contains correctly configured event details",
    "has a TTLIncrement of 20 days configured",
    "is configured to trigger an About To Start callback that changes the TTL.Suspended value (null -> missing)",

    "contains the TTL.SystemTTL for the case, that has been set to 20 days from today",
    "contains the TTL.OverrideTTL from the previouse data",
    "does not contain the TTL.Suspended as removed by callback (null -> missing)"
  ],

  "users": {
    "invokingUser": {
      "_extends_": "BeftaMasterCaseworker"
    },
    "manageTTL": {
      "_extends_": "BeftaMasterSolicitorBecky"
    }
  },

  "request": {
    "pathVariables": {
      "cid": "${[scenarioContext][childContexts][CreateCase_TTLCaseType_PreRequisiteCaseworker][testData][actualResponse][body][id]}",
      "etid": "updateWithStartTTLToUpper"
    }
  },

  "expectedResponse": {
    "body": {
      "case_details": {
        "id": "${[scenarioContext][childContexts][CreateCase_TTLCaseType_PreRequisiteCaseworker][testData][actualResponse][body][id]}",
        "version": 1,
        "case_data": {
          "TTL" : {
            "SystemTTL" : "${[scenarioContext][customValues][dateTwentyDaysFromToday]}",
            "OverrideTTL" : "${[scenarioContext][customValues][dateGreaterThanTTLGuardDate]}"
          }
        }
      },
      "event_id": "updateWithStartTTLToUpper"
    }
  }
}
