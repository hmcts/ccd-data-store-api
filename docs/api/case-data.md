# Case data format

A case's data is the combination of the data for each field of the case.

The case data itself is represented as a Json object `{}` containing key-value pairs for each field of the case.

The type and format of a value for a given field is solely determined by the type of the field.

## Field types

In all the following examples, the key `FieldId` can be any valid case field ID, as defined by the case type.

### Text

A `Text` value is a `string`.

```json
{
  "FieldId": "Some text"
}
```

### Number

A `Number` value can be a `number` or `string`. Strings should be preferred for floating point precision.

```json
{
  "FieldId": "12.34"
}
```

### YesOrNo

A `YesOrNo` value is a case insensitive `string` being either `yes` or `no`.

```json
{
  "FieldId": "Yes"
}
```

### PhoneUK

A `PhoneUK` value is a `string` representing a valid UK phone number.

```json
{
  "FieldId": "07123456789"
}
```

### Email

A `Email` value is a `string` representing a valid email address.

```json
{
  "FieldId": "ccd@hmcts.net"
}
```
### Address Type fields, implementing Postcode Lookup 
An Address type field which accepts three types `AddressUK` `AddressGlobalUK` and `AddressGlobal`, and below standard postcode format field values as a string values.

```json
{
  "FieldId": {
      "AddressLine1": "1A",
      "AddressLine2": "2A",
      "AddressLine3": "3A",
      "PostTown": "London",
      "County": "",
      "PostCode": "SW1H 9AJ",
      "Country": "United Kingdom"
    }
}
```

### MoneyGBP

A `MoneyGBP` value is a `string` representing a monetary value in pence.

For example, Â£42 would be:

```json
{
  "FieldId": "4200"
}
```

### Date

A `Date` value is a valid ISO 8601 `string` without the time part.

For example, the 29th August 2017 would be:

```json
{
  "FieldId": "2017-08-29"
}
```

### DateTime

A `DateTime` value is a valid ISO 8601 `string` with the Hour Minute Second time part.

For example, the 29th August 2017 09:47:01 AM would be:

```json
{
  "FieldId": "2017-08-29T09:45:01.000"
}
```

### TextArea

A `TextArea` value is a `string`. It contain `\n` to represent line breaks.

```json
{
  "FieldId": "Line1\nLine2"
}
```

### FixedList

A `FixedList` value is a `string` exactly matching the code of one the pre-defined options for that list.

For example, given a list with options `Option1` and `Option2`.

```json
{
  "FieldId": "Option1"
}
```

### MultiSelectList

A `MultiSelectList` value is an `array` of `string`, where each `string` item is exactly matching the code of one the pre-defined options for that list.

For example, given a list with options `Option1` and `Option2`.

```json
{
  "FieldId": ["Option1", "Option2"]
}
```

### Complex

A complex value is a Json `object` composed of key-value pairs complying to the complex type definition as defined as part of the case type.

For example, given a field `FieldId` of complex type `Address` with fields `StreetNumber` of type `Number` and `StreetName` of type `Text`:

```json
{
  "FieldId": {
    "StreetNumber": "42",
    "StreetName": "Petty France"
  }
}
```

Same rules applies for the content of a complex type and the content of case data.
As such, a complex type field can be a complex type itself:

```json
{
  "ComplexField1": {
    "SimpleField1": "42",
    "ComplexField2": {
      "SimpleField2": "Some value"
    }
  }
}
```

### Collection

A `Collection` value is a Json `array`. However, due to data classification constraints, each collection item's value must placed in a `value` property of a Json `object` of the following shape:

```json
{
  "id": "Optional. When missing, generated by CCD. Uniquely identifies a collection item",
  "value": "Actual value of the collection item"
}
```

This means that the collection `array` itself only contains `object`s and the actual values are contained within those `object`s.

Each collection item will be assigned a unique ID when first created so that it can be uniquely identified. Consequently, `id` property should be omitted for new items, but provided for existing items.

Thus, a collection of `Text` would initially be created as:

```json
{
  "FieldId": [
    {
      "value": "Value 1"
    },
    {
      "value": "Value 2"
    }
  ]
}
```

And later updated as:

```json
{
  "FieldId": [
    {
      "id": "db7d76b6-17d6-4aac-9f02-14edaedb5cbb",
      "value": "Changing existing item"
    },
    {
      "id": "db7d76b6-17d6-4aac-9f02-12345667899",
      "value": "Value 2"
    },
    {
      "value": "New item"
    }
  ]
}
```

A collection of a complex type would be:

```json
{
  "FieldId": [
    {
      "value": {
        "ComplexField1": "Value 1"
      }
    },
    {
      "value": {
        "ComplexField1": "Value 2"
      }
    }
  ]
}
```

An empty collection would be:

```json
{
  "FieldId": []
}
```

### Document

A `Document` value is a Json `object`. We accept the following structure with one `document_url` field that is mandatory. This field's value is the url that points to the previously uploaded document metadata.

```json
{
  "document_url": "http://..."
}
```

Once this gets sent to us we will retrieve the relevant metadata and send you back:

```json
{
  "document_url": "http://",
  "document_binary_url": "http://",
  "document_filename": ""
}
```

### OrderSummary

An `OrderSummary` value is a Json `object`. We accept the following structure with a mandatory field `Fees` which is a collection of `Fee` objects and mandatory `PaymentTotal` field. The `PaymentReference` is the only optional field. `Fee` object itself has 3 mandatory fields: `FeeCode`, `FeeAmount` and `FeeVersion` and one optional field `FeeDescription`.

```json
{
  "PaymentReference": "RC-1521-1095-0964-3143",
  "Fees": [
    {
      "value": {
        "FeeAmount": "4545",
        "FeeCode": "FEE0001",
        "FeeDescription": "First fee description",
        "FeeVersion": "1"
      }
    },
    {
      "value": {
        "FeeAmount": "0455",
        "FeeCode": "FEE0002",
        "FeeDescription": "Second fee description",
        "FeeVersion": "2"
      }
    }
  ],
  "PaymentTotal": "5000"
}
```

### CaseLink

A `CaseLink` is a field used to reference another CCD case using its universal 16-digit ID. It's a complex type composed of a single `CaseReference` field of type `Text`.

```json
{
  "FieldId": {
    "CaseReference": "1521109509643143"
  }
}
```

### CaseAccessGroups

A CaseAccessGroups field which accepts 'caseAccessGroupType' and 'caseAccessGroupId' as string values.
Also shows the optional required OrganisationPolicyField field.
#### Example JSON String.
```json
{
  "CaseAccessGroups": [
    {
      "id": "652027f5-93db-4251-9cd3-a823516b83ea",
      "value": {
        "caseAccessGroupId": "BEFTA_MASTER:1OXC2AA",
        "caseAccessGroupType": "CCD:all-cases-access"
      }
    },
    {
      "id": "e6a7cef1-9af2-42ba-9897-76d7c3f84dbd",
      "value": {
        "caseAccessGroupId": "BEFTA_MASTER:1OXC2AA",
        "caseAccessGroupType": "CCD:all-cases-access"
      }
    }
  ],
  "OrganisationPolicyField": {
    "Organisation": {
      "OrganisationID": "1OXC2AA",
      "OrganisationName": "groupname1"
    },
    "LastNoCRequestedBy": null,
    "OrgPolicyReference": null,
    "PreviousOrganisations": [],
    "OrgPolicyCaseAssignedRole": "groupname1",
    "PrepopulateToUsersOrganisation": null
  }
}
```

